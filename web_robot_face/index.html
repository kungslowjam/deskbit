<!DOCTYPE html>
<html lang="en" class="dark">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Robot Face Studio</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap"
        rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        :root {
            --bg-dark: #09090b;
            --bg-panel: #121217;
            --bg-panel-light: #18181b;
            --accent: #00d2ff;
            --border: #27272a;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--bg-dark);
            color: #e4e4e7;
            overflow: hidden;
            height: 100vh;
        }

        .custom-scrollbar::-webkit-scrollbar {
            width: 6px;
            height: 6px;
        }

        .custom-scrollbar::-webkit-scrollbar-track {
            background: transparent;
        }

        .custom-scrollbar::-webkit-scrollbar-thumb {
            background: #3f3f46;
            border-radius: 10px;
        }

        .custom-scrollbar::-webkit-scrollbar-thumb:hover {
            background: #52525b;
        }

        #editor-canvas {
            background: #000;
            box-shadow: 0 0 60px rgba(0, 0, 0, 0.6);
            image-rendering: pixelated;
            transition: transform 0.1s ease-out;
        }

        .canvas-round {
            border-radius: 50% !important;
            border: 2px solid var(--border);
            overflow: hidden;
        }

        /* Tooltip Style */
        .tooltip {
            position: relative;
        }

        .tooltip::after {
            content: attr(data-tooltip);
            position: absolute;
            left: 100%;
            top: 50%;
            transform: translateY(-50%) translateX(10px);
            background: #18181b;
            color: #fff;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 10px;
            font-weight: 600;
            white-space: nowrap;
            opacity: 0;
            pointer-events: none;
            transition: all 0.2s;
            border: 1px solid #27272a;
            z-index: 100;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.5);
        }

        .tooltip:hover::after {
            opacity: 1;
            transform: translateY(-50%) translateX(15px);
        }

        /* Tool Button Active State */
        .tool-btn {
            color: #a1a1aa;
            /* text-zinc-400 */
        }

        .tool-btn.active {
            background-color: rgba(0, 210, 255, 0.1);
            /* bg-accent/10 */
            color: var(--accent) !important;
            /* text-accent */
        }

        /* Color Preset Active State */
        .color-preset.active {
            box-shadow: 0 0 0 2px var(--accent);
            transform: scale(1.1);
        }

        /* Premium Toast */
        .toast {
            background: rgba(18, 18, 23, 0.9);
            backdrop-filter: blur(8px);
            color: white;
            padding: 12px 20px;
            border-radius: 12px;
            font-family: inherit;
            font-size: 13px;
            font-weight: 500;
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            gap: 10px;
            animation: slideIn 0.3s ease-out;
        }

        @keyframes slideIn {
            from {
                transform: translateX(100%);
                opacity: 0;
            }

            to {
                transform: translateX(0);
                opacity: 1;
            }
        }


        .frame-block {
            position: absolute;
            border: 2px solid var(--border);
            transition: all 0.2s;
            cursor: pointer;
            background: var(--bg-panel-light);
            border-radius: 12px;
            overflow: hidden;
            height: 95px;
        }

        .frame-block.active {
            border-color: var(--accent);
            box-shadow: 0 0 20px rgba(0, 210, 255, 0.25);
            z-index: 10;
            transform: translateY(-2px);
        }

        .frame-thumbnail {
            width: 100%;
            height: 70px;
            object-fit: contain;
            background: #000;
            border-bottom: 1px solid var(--border);
        }

        .frame-info {
            padding: 4px 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 11px;
            font-weight: 700;
            color: #52525b;
            font-family: 'JetBrains Mono', monospace;
        }

        .frame-active .frame-info {
            color: var(--accent);
            background: rgba(0, 210, 255, 0.05);
        }

        .layer-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 10px 12px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
            border: 1px solid transparent;
            background: rgba(255, 255, 255, 0.02);
        }

        .layer-item:hover {
            background: rgba(255, 255, 255, 0.05);
        }

        .layer-item.active {
            background: rgba(0, 210, 255, 0.1);
            border-color: rgba(0, 210, 255, 0.2);
        }

        .layer-icon {
            font-size: 16px;
            color: var(--accent);
            width: 20px;
            text-align: center;
        }

        .layer-name {
            flex: 1;
            font-size: 12px;
            font-weight: 500;
            color: #d4d4d8;
        }

        .layer-visibility {
            color: #52525b;
            font-size: 14px;
        }

        .playhead {
            position: absolute;
            top: 0;
            bottom: 0;
            width: 2px;
            background: var(--accent);
            box-shadow: 0 0 10px var(--accent);
            z-index: 100;
            pointer-events: none;
        }

        .playhead-marker {
            position: absolute;
            top: 0;
            left: -6px;
            width: 14px;
            height: 14px;
            background: var(--accent);
            box-shadow: 0 0 15px var(--accent);
            border: 2px solid #000;
            transform: rotate(45deg);
            z-index: 101;
        }

        /* Ruler Styles */
        #timeline-ruler {
            background: rgba(0, 0, 0, 0.4);
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            margin-bottom: 8px;
        }

        .ruler-tick {
            position: absolute;
            bottom: 0;
            height: 10px;
            border-left: 1px solid rgba(255, 255, 255, 0.2);
            font-size: 8px;
            font-weight: 800;
            color: #71717a;
            padding-left: 3px;
            display: flex;
            align-items: flex-end;
            padding-bottom: 2px;
            font-family: 'JetBrains Mono', monospace;
            pointer-events: none;
        }

        .ruler-subtick {
            position: absolute;
            bottom: 0;
            height: 5px;
            border-left: 1px solid rgba(255, 255, 255, 0.08);
            pointer-events: none;
        }

        /* Sleek Frame Clip Styles */
        .frame-block {
            position: absolute;
            background: rgba(20, 20, 25, 0.8);
            border-radius: 8px;
            border: 1px solid rgba(255, 255, 255, 0.05);
            overflow: hidden;
            height: 80px;
            transition: all 0.2s cubic-bezier(0.16, 1, 0.3, 1);
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(4px);
        }

        .frame-block:hover {
            border-color: rgba(0, 210, 255, 0.3);
            background: rgba(30, 30, 35, 0.9);
            transform: translateY(-1px);
        }

        .frame-block.active {
            border-color: var(--accent);
            background: rgba(40, 40, 50, 0.5);
            transform: translateY(-2px);
            box-shadow: 0 8px 24px rgba(0, 210, 255, 0.25);
            z-index: 10;
        }

        .frame-block.active::before {
            content: '';
            position: absolute;
            inset: 0;
            background: linear-gradient(to bottom, rgba(0, 210, 255, 0.1), transparent);
            pointer-events: none;
        }

        .frame-thumbnail {
            width: 100%;
            height: 100%;
            object-fit: contain;
            opacity: 0.6;
            transition: all 0.3s ease;
            filter: grayscale(0.5);
        }

        .frame-block.active .frame-thumbnail {
            opacity: 1;
            filter: grayscale(0);
            transform: scale(1.05);
        }

        .frame-info {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(transparent, rgba(0, 0, 0, 0.9));
            padding: 6px 8px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            pointer-events: none;
            border-top: 1px solid rgba(255, 255, 255, 0.03);
        }

        .frame-number {
            font-size: 10px;
            font-weight: 900;
            color: rgba(255, 255, 255, 0.3);
            font-family: 'JetBrains Mono', monospace;
            letter-spacing: -0.02em;
        }

        .frame-block.active .frame-number {
            color: var(--accent);
            text-shadow: 0 0 8px rgba(0, 210, 255, 0.5);
        }

        .frame-duration {
            font-size: 9px;
            font-weight: 700;
            color: rgba(255, 255, 255, 0.25);
            font-family: 'JetBrains Mono', monospace;
        }

        .frame-block.active .frame-duration {
            color: rgba(255, 255, 255, 0.6);
        }

        .frame-block.active .frame-number {
            color: var(--accent);
            background: rgba(0, 210, 255, 0.15);
        }

        .frame-duration {
            font-size: 9px;
            font-weight: 700;
            color: #71717a;
            font-family: 'JetBrains Mono', monospace;
        }

        .resize-handle {
            position: absolute;
            right: 0;
            top: 0;
            bottom: 0;
            width: 6px;
            cursor: col-resize;
            background: rgba(255, 255, 255, 0.05);
            opacity: 0;
            transition: opacity 0.2s;
        }

        .frame-block:hover .resize-handle {
            opacity: 1;
        }

        .resize-handle:hover {
            background: var(--accent);
        }

        input[type="range"] {
            -webkit-appearance: none;
            appearance: none;
            background: #27272a;
            border-radius: 10px;
            height: 4px;
        }

        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            height: 12px;
            width: 12px;
            border-radius: 50%;
            background: var(--accent);
            cursor: pointer;
            border: 2px solid var(--bg-panel);
            box-shadow: 0 0 10px var(--accent);
        }
    </style>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        panel: '#121217',
                        accent: '#00d2ff',
                        dark: '#09090b',
                        border: '#27272a'
                    }
                }
            }
        }
    </script>
</head>

<body class="flex flex-col h-screen overflow-hidden">
    <!-- Top Navigation -->
    <header class="h-14 border-b border-border bg-panel flex items-center justify-between px-4 z-50 shrink-0">
        <!-- Left: Project Info -->
        <div class="flex items-center gap-4 min-w-0 flex-1">
            <div class="flex items-center gap-2 shrink-0">
                <div
                    class="w-8 h-8 bg-accent rounded-lg flex items-center justify-center shadow-[0_0_15px_rgba(0,210,255,0.3)]">
                    <i data-lucide="bot" class="w-5 h-5 text-dark stroke-[2.5]"></i>
                </div>
                <h1
                    class="font-bold text-lg tracking-tight bg-gradient-to-r from-white to-zinc-500 bg-clip-text text-transparent hidden sm:block">
                    Robot Studio</h1>
            </div>

            <div class="h-6 w-[1px] bg-border mx-1 shrink-0"></div>

            <!-- Removed overflow-hidden to allow dropdown visibility -->
            <div class="flex items-center gap-4 min-w-0">
                <div class="flex flex-col shrink-0">
                    <label class="text-[10px] uppercase font-bold text-zinc-500 ml-0.5 mb-1 tracking-wider">Name</label>
                    <input type="text" id="anim-name" value="my_anim"
                        class="bg-black/60 border border-border rounded-md px-3 py-1.5 text-sm focus:border-accent outline-none w-28 md:w-36 transition-all font-medium text-zinc-100">
                </div>

                <div class="flex flex-col shrink-0">
                    <label class="text-[10px] uppercase font-bold text-zinc-500 ml-0.5 mb-1 tracking-wider">Size</label>
                    <div class="flex border border-border rounded-md overflow-hidden bg-black/40">
                        <input type="number" id="canvas-width" value="466"
                            class="w-11 bg-transparent text-center py-1.5 text-xs border-r border-border outline-none focus:bg-accent/10 transition-colors">
                        <input type="number" id="canvas-height" value="466"
                            class="w-11 bg-transparent text-center py-1.5 text-xs outline-none focus:bg-accent/10 transition-colors">
                    </div>
                </div>

                <div class="flex flex-col shrink-0 h-[52px] justify-end pb-0.5 mr-2">
                    <label
                        class="flex items-center gap-2 text-xs text-zinc-400 cursor-pointer hover:text-white transition-all h-[34px]">
                        <input type="checkbox" id="round-toggle" class="sr-only peer">
                        <div
                            class="w-8 h-4 bg-zinc-700 rounded-full peer-checked:bg-accent relative transition-all border border-white/5">
                            <div
                                class="absolute w-2.5 h-2.5 bg-white rounded-full top-0.5 left-0.5 peer-checked:left-4.5 transition-all">
                            </div>
                        </div>
                        <span
                            class="font-bold uppercase text-[10px] tracking-wider text-zinc-500 peer-checked:text-accent transition-colors">Round</span>
                    </label>
                </div>

                <!-- Eye Library Dropdown (Hover + Click Support) -->
                <div class="relative group h-[52px] flex items-end pb-0.5">
                    <input type="checkbox" id="library-toggle" class="sr-only peer">
                    <!-- Label as Toggle Button -->
                    <label for="library-toggle"
                        class="flex items-center gap-2 px-3 py-1.5 bg-accent/10 border border-accent/20 rounded-md text-accent hover:bg-accent hover:text-dark transition-all font-bold text-[10px] uppercase tracking-wider cursor-pointer active:scale-95 peer-checked:bg-accent peer-checked:text-dark group-hover:bg-accent/20">
                        <i data-lucide="layout-grid" class="w-3.5 h-3.5"></i>
                        LIBRARY
                        <i data-lucide="chevron-down" class="w-3 h-3 transition-transform peer-checked:rotate-180"></i>
                    </label>

                    <!-- Dropdown Panel (Centering with translate-x) -->
                    <div
                        class="absolute top-full left-1/2 -translate-x-1/2 mt-3 w-80 bg-panel border border-border rounded-2xl shadow-[0_30px_60px_rgba(0,0,0,0.8)] opacity-0 invisible group-hover:opacity-100 group-hover:visible peer-checked:opacity-100 peer-checked:visible transition-all z-[100] p-5 backdrop-blur-2xl ring-1 ring-white/10">
                        <div class="flex items-center gap-3 mb-4 px-1">
                            <span class="text-[10px] font-black text-zinc-500 uppercase tracking-[0.2em]">Preset
                                Templates</span>
                            <div class="h-px bg-white/5 flex-1"></div>
                        </div>
                        <div class="grid grid-cols-2 gap-3" id="eye-library">
                            <!-- Presets (Added slight scaling on hover for premium feel) -->
                            <button
                                class="eye-preset group/item p-2.5 bg-zinc-900/50 border border-white/5 rounded-xl hover:border-accent/50 hover:bg-zinc-900 transition-all text-left hover:scale-[1.02] active:scale-95"
                                onclick="applyEyePreset('angry')">
                                <svg viewBox="0 0 100 60"
                                    class="w-full h-auto drop-shadow-sm opacity-50 group-hover/item:opacity-100 transition-opacity">
                                    <path d="M10,20 C30,15 70,5 95,25 C80,60 20,60 10,20 Z" fill="#00ffff" />
                                </svg>
                                <span
                                    class="text-[9px] font-black text-zinc-600 uppercase mt-2 block group-hover/item:text-accent tracking-tighter">Angry
                                    Gaze</span>
                            </button>
                            <button
                                class="eye-preset group/item p-2.5 bg-zinc-900/50 border border-white/5 rounded-xl hover:border-accent/50 hover:bg-zinc-900 transition-all text-left hover:scale-[1.02] active:scale-95"
                                onclick="applyEyePreset('alert')">
                                <svg viewBox="0 0 100 60"
                                    class="w-full h-auto drop-shadow-sm opacity-50 group-hover/item:opacity-100 transition-opacity">
                                    <path d="M20,15 C50,0 100,20 80,55 C40,70 0,50 20,15 Z" fill="#00ffff" />
                                </svg>
                                <span
                                    class="text-[9px] font-black text-zinc-600 uppercase mt-2 block group-hover/item:text-accent tracking-tighter">Wide
                                    Alert</span>
                            </button>
                            <button
                                class="eye-preset group/item p-2.5 bg-zinc-900/50 border border-white/5 rounded-xl hover:border-accent/50 hover:bg-zinc-900 transition-all text-left hover:scale-[1.02] active:scale-95"
                                onclick="applyEyePreset('sad')">
                                <svg viewBox="0 0 100 60"
                                    class="w-full h-auto drop-shadow-sm opacity-50 group-hover/item:opacity-100 transition-opacity">
                                    <path d="M5,25 C30,10 70,10 95,25 C95,55 5,55 5,25 Z" fill="#00ffff" />
                                </svg>
                                <span
                                    class="text-[9px] font-black text-zinc-600 uppercase mt-2 block group-hover/item:text-accent tracking-tighter">Sad
                                    Curve</span>
                            </button>
                            <button
                                class="eye-preset group/item p-2.5 bg-zinc-900/50 border border-white/5 rounded-xl hover:border-accent/50 hover:bg-zinc-900 transition-all text-left hover:scale-[1.02] active:scale-95"
                                onclick="applyEyePreset('evil')">
                                <svg viewBox="0 0 100 60"
                                    class="w-full h-auto drop-shadow-sm opacity-50 group-hover/item:opacity-100 transition-opacity">
                                    <path d="M5,35 Q50,0 95,35 Q50,70 5,35 Z" fill="#00ffff" />
                                </svg>
                                <span
                                    class="text-[9px] font-black text-zinc-600 uppercase mt-2 block group-hover/item:text-accent tracking-tighter">Evil
                                    Slit</span>
                            </button>
                            <button
                                class="eye-preset group/item p-2.5 bg-zinc-900/50 border border-white/5 rounded-xl hover:border-accent/50 hover:bg-zinc-900 transition-all text-left hover:scale-[1.02] active:scale-95"
                                onclick="applyEyePreset('bean')">
                                <svg viewBox="0 0 100 60"
                                    class="w-full h-auto drop-shadow-sm opacity-50 group-hover/item:opacity-100 transition-opacity">
                                    <path d="M5,15 L95,15 Q95,60 50,60 Q5,60 5,15 Z" fill="#00ffff" />
                                </svg>
                                <span
                                    class="text-[9px] font-black text-zinc-600 uppercase mt-2 block group-hover/item:text-accent tracking-tighter">Bean
                                    Shape</span>
                            </button>
                            <button
                                class="eye-preset group/item p-2.5 bg-zinc-900/50 border border-white/5 rounded-xl hover:border-accent/50 hover:bg-zinc-900 transition-all text-left hover:scale-[1.02] active:scale-95"
                                onclick="applyEyePreset('slit')">
                                <svg viewBox="0 0 100 60"
                                    class="w-full h-auto drop-shadow-sm opacity-50 group-hover/item:opacity-100 transition-opacity">
                                    <rect x="5" y="25" width="90" height="15" rx="7" fill="#00ffff" />
                                </svg>
                                <span
                                    class="text-[9px] font-black text-zinc-600 uppercase mt-2 block group-hover/item:text-accent tracking-tighter">Modern
                                    Bar</span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Right: Control Groups -->
        <div class="flex items-center gap-3 md:gap-6 shrink-0 ml-4">
            <!-- Group 1: Playback -->
            <div class="flex items-center gap-3 bg-black/30 rounded-lg px-3 py-1.5 border border-border shrink-0">
                <button id="play-btn"
                    class="hover:text-accent transition-colors flex items-center gap-2 text-sm font-bold min-w-[50px]">
                    <i data-lucide="play" class="w-4 h-4 fill-current text-accent"></i> PLAY
                </button>
                <div class="w-px h-4 bg-border"></div>
                <button id="stop-btn" class="hover:text-red-400 transition-colors" title="Stop">
                    <i data-lucide="square" class="w-4 h-4"></i>
                </button>
            </div>

            <!-- Group 2: Settings -->
            <div class="hidden lg:flex items-center gap-4 shrink-0">
                <div class="flex items-center gap-3">
                    <i data-lucide="zap" class="w-4 h-4 text-zinc-500"></i>
                    <input type="range" id="fps-range" min="1" max="24" value="12" class="w-20 accent-accent">
                    <span id="fps-value" class="text-[10px] uppercase font-bold text-zinc-500 w-10 text-right">12
                        FPS</span>
                </div>

                <div class="flex bg-zinc-900 rounded-md p-0.5 border border-border">
                    <button id="export-c-btn" class="p-1.5 hover:bg-zinc-800 rounded transition-all text-zinc-400"
                        title="Export Bitmap C (RGB565)"><i data-lucide="image" class="w-4 h-4"></i></button>
                    <button id="export-lvgl-native-btn"
                        class="p-1.5 hover:bg-zinc-800 rounded transition-all text-zinc-400"
                        title="Export Native LVGL Code"><i data-lucide="code-2" class="w-4 h-4"></i></button>
                    <button id="import-btn" class="p-1.5 hover:bg-zinc-800 rounded transition-all text-zinc-400"
                        title="Open JSON"><i data-lucide="folder-open" class="w-4 h-4"></i></button>
                    <button id="export-btn" class="p-1.5 hover:bg-zinc-800 rounded transition-all text-zinc-400"
                        title="Save JSON"><i data-lucide="save" class="w-4 h-4"></i></button>
                </div>
            </div>

            <!-- Group 3: High Priority Actions -->
            <div class="flex items-center gap-2 shrink-0">
                <button id="send-btn"
                    class="bg-accent text-dark h-9 px-4 rounded-lg text-xs font-bold shadow-[0_0_15px_rgba(0,210,255,0.4)] hover:scale-105 active:scale-95 transition-all flex items-center gap-2">
                    <i data-lucide="send" class="w-4 h-4 stroke-[2.5]"></i> <span class="hidden sm:inline">SEND TO
                        ROBOT</span><span class="sm:hidden">SEND</span>
                </button>
                <button id="del-btn" onclick="deleteFromRobot()"
                    class="w-9 h-9 flex items-center justify-center hover:bg-red-500/10 text-red-500 rounded-lg border border-red-500/20 transition-all">
                    <i data-lucide="trash-2" class="w-4 h-4"></i>
                </button>
            </div>
        </div>
    </header>

    <main class="flex-1 flex overflow-hidden">
        <!-- Sidebar - Files & Tools -->
        <aside class="w-16 border-r border-border bg-panel flex flex-col items-center py-4 gap-6 shrink-0">
            <div class="flex flex-col gap-2 w-full px-2" id="toolbar-main">
                <button
                    class="tool-btn tooltip active p-3 rounded-xl hover:bg-white/5 transition-all flex justify-center"
                    id="tool-pen" data-tooltip="Pen (P)">
                    <i data-lucide="pencil" class="w-5 h-5"></i>
                </button>
                <button class="tool-btn tooltip p-3 rounded-xl hover:bg-white/5 transition-all flex justify-center"
                    id="tool-eraser" data-tooltip="Eraser (E)">
                    <i data-lucide="eraser" class="w-5 h-5"></i>
                </button>
                <button class="tool-btn tooltip p-3 rounded-xl hover:bg-white/5 transition-all flex justify-center"
                    id="tool-fill" data-tooltip="Fill (G)">
                    <i data-lucide="paint-bucket" class="w-5 h-5"></i>
                </button>
                <button class="tool-btn tooltip p-3 rounded-xl hover:bg-white/5 transition-all flex justify-center"
                    id="tool-eyedropper" data-tooltip="Eyedropper (I)">
                    <i data-lucide="pipette" class="w-5 h-5"></i>
                </button>
                <div class="h-px bg-border mx-2 my-1"></div>
                <button class="tool-btn tooltip p-3 rounded-xl hover:bg-white/5 transition-all flex justify-center"
                    id="tool-select" data-tooltip="Select (V)">
                    <i data-lucide="mouse-pointer-2" class="w-5 h-5"></i>
                </button>
                <button class="tool-btn tooltip p-3 rounded-xl hover:bg-white/5 transition-all flex justify-center"
                    id="tool-rect-obj" data-tooltip="Rectangle">
                    <i data-lucide="square" class="w-5 h-5"></i>
                </button>
                <button class="tool-btn tooltip p-3 rounded-xl hover:bg-white/5 transition-all flex justify-center"
                    id="tool-ellipse-obj" data-tooltip="Ellipse">
                    <i data-lucide="circle" class="w-5 h-5"></i>
                </button>
                <button class="tool-btn tooltip p-3 rounded-xl hover:bg-white/5 transition-all flex justify-center"
                    id="tool-line-obj" data-tooltip="Line">
                    <i data-lucide="minus" class="w-5 h-5 rotate-45"></i>
                </button>
                <button class="tool-btn tooltip p-3 rounded-xl hover:bg-white/5 transition-all flex justify-center"
                    id="tool-triangle-obj" data-tooltip="Triangle">
                    <i data-lucide="triangle" class="w-5 h-5"></i>
                </button>
                <button class="tool-btn tooltip p-3 rounded-xl hover:bg-white/5 transition-all flex justify-center"
                    id="tool-text-obj" data-tooltip="Text (T)">
                    <i data-lucide="type" class="w-5 h-5"></i>
                </button>
                <div class="h-px bg-border mx-2 my-1"></div>
                <!-- Symmetry Toggle -->
                <button class="tool-btn tooltip p-3 rounded-xl hover:bg-white/5 transition-all flex justify-center"
                    id="action-symmetry" data-tooltip="Horizontal Symmetry (S)">
                    <i data-lucide="split" class="w-5 h-5 text-zinc-500"></i>
                </button>
            </div>


            <div class="mt-auto flex flex-col gap-4">
                <button id="action-undo" class="p-2 text-zinc-500 hover:text-white transition-colors"><i
                        data-lucide="undo" class="w-5 h-5"></i></button>
                <button id="action-clear" class="p-2 text-zinc-500 hover:text-red-400 transition-colors"
                    title="Clear Canvas"><i data-lucide="trash" class="w-5 h-5"></i></button>
            </div>
        </aside>

        <!-- Canvas Area -->
        <section class="flex-1 bg-dark relative flex flex-col">
            <div id="canvas-viewport"
                class="flex-1 overflow-hidden flex items-center justify-center p-12 bg-[radial-gradient(#18181b_1px,transparent_1px)] [background-size:20px_20px]">
                <div id="canvas-wrapper" class="relative group shadow-2xl transition-transform duration-300">
                    <canvas id="editor-canvas"></canvas>
                    <div id="grid-overlay"
                        class="absolute inset-0 pointer-events-none opacity-20 border border-white/5"></div>
                    <div id="safe-zone-guide"
                        class="absolute inset-0 border-2 border-accent/20 rounded-full pointer-events-none hidden">
                    </div>
                </div>
            </div>

            <!-- Floating Zoom Controls -->
            <div
                class="absolute bottom-6 left-1/2 -translate-x-1/2 flex items-center gap-1 bg-panel/80 backdrop-blur-md border border-border p-1 rounded-full shadow-xl">
                <button id="zoom-out-btn" class="p-2 hover:bg-white/5 rounded-full transition-colors"><i
                        data-lucide="zoom-out" class="w-4 h-4"></i></button>
                <span id="zoom-level" class="text-[10px] font-bold w-12 text-center text-zinc-400">100%</span>
                <button id="zoom-in-btn" class="p-2 hover:bg-white/5 rounded-full transition-colors"><i
                        data-lucide="zoom-in" class="w-4 h-4"></i></button>
                <div class="w-px h-4 bg-border mx-1"></div>
                <button id="zoom-reset-btn" class="p-2 hover:bg-white/5 rounded-full transition-colors"><i
                        data-lucide="maximize" class="w-4 h-4"></i></button>
                <button id="zoom-fit-btn"
                    class="pr-3 pl-1 text-[10px] font-bold uppercase text-accent hover:text-white transition-colors">Fit</button>
            </div>
        </section>

        <!-- Right Properties Panel -->
        <aside
            class="w-80 border-l border-border bg-panel flex flex-col custom-scrollbar overflow-y-auto shrink-0 z-40">
            <!-- Preview Section -->
            <div class="p-4 border-b border-border bg-black/10">
                <div class="flex items-center justify-between mb-3">
                    <span class="text-[10px] uppercase font-bold text-zinc-500 tracking-widest flex items-center gap-2">
                        <i data-lucide="eye" class="w-3.5 h-3.5 text-zinc-600"></i> Live Preview
                    </span>
                    <span class="w-2 h-2 rounded-full bg-accent animate-pulse shadow-[0_0_8px_var(--accent)]"></span>
                </div>
                <div id="preview-container"
                    class="aspect-square bg-black rounded-2xl overflow-hidden ring-1 ring-white/5 shadow-2xl flex items-center justify-center relative group">
                    <canvas id="preview-canvas"
                        class="max-w-full max-h-full object-contain transition-transform duration-500 group-hover:scale-105"></canvas>
                    <div class="absolute inset-0 bg-gradient-to-t from-black/20 to-transparent pointer-events-none">
                    </div>
                </div>
            </div>

            <!-- Objects Section -->
            <div class="flex flex-col shrink-0 border-b border-border/50">
                <div class="p-4 border-b border-border flex items-center justify-between bg-black/5">
                    <span class="text-[10px] uppercase font-bold text-zinc-500 tracking-widest flex items-center gap-2">
                        <i data-lucide="layers" class="w-3.5 h-3.5 text-zinc-600"></i> Objects
                    </span>
                    <button id="layer-add-btn"
                        class="w-7 h-7 flex items-center justify-center bg-accent/10 text-accent hover:bg-accent hover:text-dark rounded-lg transition-all shadow-sm">
                        <i data-lucide="plus" class="w-4 h-4"></i>
                    </button>
                </div>

                <div id="layers-list" class="flex flex-col gap-2 p-3 bg-black/10 min-h-[140px]">
                    <!-- Placeholder or Layer Items -->
                </div>

                <!-- Layer Order Tools -->
                <div class="px-4 py-2 border-t border-border flex justify-between items-center bg-panel">
                    <div class="flex gap-1">
                        <button id="layer-up-btn"
                            class="p-2 hover:bg-zinc-800 rounded-lg transition-all text-zinc-500 hover:text-zinc-200"
                            title="Move Up"><i data-lucide="arrow-up" class="w-4 h-4"></i></button>
                        <button id="layer-down-btn"
                            class="p-2 hover:bg-zinc-800 rounded-lg transition-all text-zinc-500 hover:text-zinc-200"
                            title="Move Down"><i data-lucide="arrow-down" class="w-4 h-4"></i></button>
                    </div>
                    <button id="layer-del-btn"
                        class="p-2 hover:bg-red-500/10 rounded-lg transition-all text-zinc-600 hover:text-red-500"
                        title="Delete Object"><i data-lucide="trash-2" class="w-4 h-4"></i></button>
                </div>
            </div>

            <!-- Interactions & States Section -->
            <div class="flex flex-col shrink-0 border-b border-border/50 bg-black/5">
                <div class="p-4 border-b border-border flex items-center justify-between">
                    <span class="text-[10px] uppercase font-bold text-zinc-500 tracking-widest flex items-center gap-2">
                        <i data-lucide="zap" class="w-3.5 h-3.5 text-zinc-600"></i> Interactions & States
                    </span>
                    <button id="state-add-btn"
                        class="w-7 h-7 flex items-center justify-center bg-accent/10 text-accent hover:bg-accent hover:text-dark rounded-lg transition-all shadow-sm">
                        <i data-lucide="plus" class="w-4 h-4"></i>
                    </button>
                </div>

                <div id="states-list" class="flex flex-col gap-1 p-3 custom-scrollbar max-h-[180px] overflow-y-auto">
                    <!-- State Items -->
                    <div
                        class="text-[10px] text-zinc-600 font-bold text-center py-4 bg-black/20 rounded-lg border border-white/5 border-dashed">
                        No states defined
                    </div>
                </div>

                <!-- Interaction Setup (Context-aware) -->
                <div id="interaction-editor" class="p-4 border-t border-border bg-panel hidden">
                    <div class="flex flex-col gap-3">
                        <span class="text-[9px] uppercase font-black text-accent tracking-widest">Setup
                            Interaction</span>
                        <div class="flex flex-col gap-2">
                            <div class="flex items-center justify-between text-[10px]">
                                <span class="text-zinc-500 font-bold">Trigger</span>
                                <select id="trigger-type"
                                    class="bg-zinc-900 border border-white/10 rounded-md px-2 py-1 text-zinc-300">
                                    <option value="click">On Click (Touch)</option>
                                    <option value="timer">Auto (Timer)</option>
                                    <option value="finish">On Finish</option>
                                </select>
                            </div>
                            <div class="flex items-center justify-between text-[10px]">
                                <span class="text-zinc-500 font-bold">Next State</span>
                                <select id="trigger-next-state"
                                    class="bg-zinc-900 border border-white/10 rounded-md px-2 py-1 text-zinc-300">
                                    <option value="idle">Idle</option>
                                </select>
                            </div>
                            <button id="save-interaction-btn"
                                class="w-full bg-accent/20 text-accent font-black py-2 rounded-lg text-[9px] uppercase tracking-widest mt-1 hover:bg-accent hover:text-dark transition-all">Save
                                Interaction</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Properties Panel -->
            <div
                class="p-6 border-t border-border bg-black/20 flex flex-col gap-8 shadow-[-10px_0_30px_rgba(0,0,0,0.3)] relative z-10">
                <!-- Color Property -->
                <div class="flex flex-col gap-3">
                    <label
                        class="text-[10px] uppercase font-bold text-zinc-500 tracking-widest flex items-center gap-2">
                        Active Color
                    </label>
                    <div class="flex gap-3 items-center bg-zinc-900/50 p-2.5 rounded-xl border border-white/5">
                        <div class="relative group">
                            <input type="color" id="color-picker"
                                class="w-10 h-10 rounded-lg border-none bg-transparent cursor-pointer p-0 overflow-hidden shadow-lg z-10 relative">
                            <div
                                class="absolute inset-0 rounded-lg bg-zinc-800 ring-1 ring-white/10 group-hover:ring-white/30 transition-all">
                            </div>
                        </div>
                        <div class="grid grid-cols-4 gap-2 flex-1" id="color-presets">
                            <div class="color-preset w-7 h-7 rounded-lg bg-[#00ffff] cursor-pointer ring-1 ring-white/5 hover:scale-110 active:scale-90 transition-all shadow-sm"
                                onclick="setColor('#00ffff', this)"></div>
                            <div class="color-preset w-7 h-7 rounded-lg bg-[#ff0055] cursor-pointer ring-1 ring-white/5 hover:scale-110 active:scale-90 transition-all shadow-sm"
                                onclick="setColor('#ff0055', this)"></div>
                            <div class="color-preset w-7 h-7 rounded-lg bg-[#00ff66] cursor-pointer ring-1 ring-white/5 hover:scale-110 active:scale-90 transition-all shadow-sm"
                                onclick="setColor('#00ff66', this)"></div>
                            <div class="color-preset w-7 h-7 rounded-lg bg-[#ffaa00] cursor-pointer ring-1 ring-white/5 hover:scale-110 active:scale-90 transition-all shadow-sm"
                                onclick="setColor('#ffaa00', this)"></div>
                            <div class="color-preset w-7 h-7 rounded-lg bg-[#888888] cursor-pointer ring-1 ring-white/5 hover:scale-110 active:scale-90 transition-all shadow-sm"
                                onclick="setColor('#888888', this)"></div>
                            <div class="color-preset w-7 h-7 rounded-lg bg-white cursor-pointer ring-1 ring-white/5 hover:scale-110 active:scale-90 transition-all shadow-sm"
                                onclick="setColor('#ffffff', this)"></div>
                        </div>
                    </div>
                </div>

                <!-- Brush Size Property -->
                <div class="flex flex-col gap-3">
                    <div class="flex items-center justify-between px-0.5">
                        <span class="text-[10px] uppercase font-bold text-zinc-500 tracking-widest">Brush Size</span>
                        <span class="text-[10px] font-bold text-accent font-mono bg-accent/10 px-2 py-0.5 rounded-full"
                            id="brush-size-val">1px</span>
                    </div>
                    <div class="px-1">
                        <input type="range" id="brush-size-slider" min="1" max="20" step="1" value="1"
                            class="w-full accent-accent h-1.5 rounded-full bg-zinc-800 appearance-none cursor-pointer">
                    </div>
                </div>

                <!-- Opacity Property -->
                <div class="flex flex-col gap-3">
                    <div class="flex items-center justify-between px-0.5">
                        <span class="text-[10px] uppercase font-bold text-zinc-500 tracking-widest">Opacity</span>
                        <span class="text-[10px] font-bold text-accent font-mono bg-accent/10 px-2 py-0.5 rounded-full"
                            id="opacity-val">100%</span>
                    </div>
                    <div class="px-1">
                        <input type="range" id="opacity-slider" min="0" max="1" step="0.05" value="1"
                            class="w-full accent-accent h-1.5 rounded-full bg-zinc-800 appearance-none cursor-pointer">
                    </div>
                </div>

                <!-- Stroke Property (New) -->
                <div class="flex flex-col gap-4 bg-zinc-900/40 p-3 rounded-2xl border border-white/5">
                    <span class="text-[10px] uppercase font-black text-zinc-600 tracking-widest px-1">Stroke /
                        Border</span>

                    <div class="flex flex-col gap-3">
                        <div class="flex items-center justify-between px-1">
                            <span class="text-[9px] font-bold text-zinc-500 uppercase">Width</span>
                            <span class="text-[9px] font-mono text-accent" id="stroke-width-val">0px</span>
                        </div>
                        <input type="range" id="stroke-width-slider" min="0" max="20" step="1" value="0"
                            class="w-full h-1 bg-zinc-800 rounded-full appearance-none cursor-pointer accent-accent">
                    </div>

                    <div class="flex items-center justify-between px-1">
                        <span class="text-[9px] font-bold text-zinc-500 uppercase">Color</span>
                        <input type="color" id="stroke-color-picker" value="#ffffff"
                            class="w-6 h-6 rounded-md border-none bg-transparent cursor-pointer p-0 overflow-hidden">
                    </div>
                </div>

                <!-- Shape Specific Details (Context Aware) -->
                <div id="shape-extras" class="flex flex-col gap-4 border-t border-white/5 pt-4 hidden">
                    <!-- Corner Radius (for Rects) -->
                    <div id="prop-corner-radius" class="flex flex-col gap-3 hidden">
                        <div class="flex items-center justify-between px-1">
                            <span class="text-[9px] font-bold text-zinc-400 uppercase">Corner Radius</span>
                            <span class="text-[9px] font-mono text-accent" id="corner-radius-val">0px</span>
                        </div>
                        <input type="range" id="corner-radius-slider" min="0" max="100" step="1" value="0"
                            class="w-full h-1 bg-zinc-800 rounded-full appearance-none cursor-pointer accent-accent">
                    </div>

                    <!-- Polygon Sides / Star Points -->
                    <div id="prop-polygon-sides" class="flex flex-col gap-3 hidden">
                        <div class="flex items-center justify-between px-1">
                            <span class="text-[9px] font-bold text-zinc-400 uppercase">Sides / Points</span>
                            <span class="text-[9px] font-mono text-accent" id="polygon-sides-val">5</span>
                        </div>
                        <input type="range" id="polygon-sides-slider" min="3" max="12" step="1" value="5"
                            class="w-full h-1 bg-zinc-800 rounded-full appearance-none cursor-pointer accent-accent">
                    </div>
                </div>

                <!-- Timing Property -->
                <div
                    class="bg-gradient-to-br from-zinc-900 to-black p-4 rounded-2xl border border-white/5 shadow-xl relative overflow-hidden group">
                    <div class="absolute top-0 right-0 w-24 h-24 bg-accent/5 blur-3xl rounded-full -mr-10 -mt-10"></div>
                    <div class="flex items-center justify-between relative z-10">
                        <div class="flex flex-col gap-1">
                            <span
                                class="text-[10px] uppercase font-bold text-zinc-500 tracking-widest leading-none">Frame
                                Duration</span>
                            <span class="text-[9px] text-zinc-500 font-medium">Timing for current frame</span>
                        </div>
                        <div
                            class="flex items-center gap-3 bg-black/40 px-3 py-2 rounded-xl border border-white/10 shadow-inner group-hover:border-accent/30 transition-colors">
                            <input type="number" id="frame-duration" value="100"
                                class="w-14 bg-transparent text-sm text-accent outline-none font-bold text-right [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none"
                                step="10">
                            <span class="text-[10px] font-bold text-zinc-600 uppercase tracking-tighter">ms</span>
                        </div>
                    </div>
                </div>

                <!-- Advanced Settings -->
                <div class="flex flex-col gap-3.5 bg-black/20 p-4 rounded-2xl border border-white/5">
                    <div class="flex items-center justify-between pb-1 border-b border-white/5 mb-1">
                        <span class="text-[10px] uppercase font-bold text-zinc-400 tracking-widest">Settings</span>
                        <i data-lucide="settings-2" class="w-3.5 h-3.5 text-zinc-600"></i>
                    </div>
                    <div class="flex flex-col gap-3">
                        <div class="flex items-center justify-between text-xs">
                            <span
                                class="text-zinc-500 font-bold text-[10px] uppercase tracking-wider">Interpolation</span>
                            <select id="easing-mode"
                                class="bg-zinc-900 border border-white/10 rounded-lg px-2 py-1.5 outline-none text-zinc-300 text-[10px] font-bold tracking-tight focus:border-accent/40 transition-colors cursor-pointer">
                                <option value="linear">Linear</option>
                                <option value="ease-in">Ease In</option>
                                <option value="ease-out">Ease Out</option>
                                <option value="ease-in-out">Smooth (Ease In-Out)</option>
                                <option value="overshoot">Overshoot (Organic)</option>
                                <option value="bounce">Bounce</option>
                                <option value="spring">Spring</option>
                                <option value="custom">Custom Curve</option>
                            </select>
                        </div>
                        <!-- Curve Preview -->
                        <div id="curve-preview-container" class="hidden flex flex-col gap-2">
                            <div class="h-24 bg-black/40 rounded-xl border border-white/5 relative overflow-hidden">
                                <canvas id="curve-canvas" width="200" height="100" class="w-full h-full"></canvas>
                                <div
                                    class="absolute inset-x-2 bottom-1 flex justify-between text-[8px] text-zinc-600 font-bold uppercase tracking-tighter">
                                    <span>Start</span>
                                    <span>Time</span>
                                    <span>End</span>
                                </div>
                            </div>
                            <!-- Curve Sliders -->
                            <div class="grid grid-cols-2 gap-x-3 gap-y-2">
                                <div class="flex flex-col gap-1">
                                    <span class="text-[8px] text-zinc-500 font-bold uppercase">Handle 1 X</span>
                                    <input type="range" id="bezier-p1x" min="0" max="1" step="0.01" value="0.42"
                                        class="accent-accent h-1 bg-zinc-800 rounded-full appearance-none cursor-pointer">
                                </div>
                                <div class="flex flex-col gap-1">
                                    <span class="text-[8px] text-zinc-500 font-bold uppercase">Handle 1 Y</span>
                                    <input type="range" id="bezier-p1y" min="0" max="1" step="0.01" value="0.0"
                                        class="accent-accent h-1 bg-zinc-800 rounded-full appearance-none cursor-pointer">
                                </div>
                                <div class="flex flex-col gap-1">
                                    <span class="text-[8px] text-zinc-500 font-bold uppercase">Handle 2 X</span>
                                    <input type="range" id="bezier-p2x" min="0" max="1" step="0.01" value="0.58"
                                        class="accent-accent h-1 bg-zinc-800 rounded-full appearance-none cursor-pointer">
                                </div>
                                <div class="flex flex-col gap-1">
                                    <span class="text-[8px] text-zinc-500 font-bold uppercase">Handle 2 Y</span>
                                    <input type="range" id="bezier-p2y" min="0" max="1" step="0.01" value="1.0"
                                        class="accent-accent h-1 bg-zinc-800 rounded-full appearance-none cursor-pointer">
                                </div>
                            </div>
                        </div>
                    </div>
                    <label
                        class="flex items-center justify-between text-[10px] cursor-pointer group uppercase font-bold tracking-wider">
                        <div class="flex items-center gap-2">
                            <span class="text-zinc-500 group-hover:text-zinc-300 transition-colors">Horizontal
                                Symmetry</span>
                            <i data-lucide="columns-2" class="w-3 h-3 text-zinc-600"></i>
                        </div>
                        <input type="checkbox" id="symmetry-toggle" class="sr-only peer">
                        <div
                            class="w-8 h-4 bg-zinc-800 rounded-full peer-checked:bg-accent relative transition-all border border-white/5">
                            <div
                                class="absolute w-2.5 h-2.5 bg-white rounded-full top-0.5 left-0.5 peer-checked:left-4.5 transition-all">
                            </div>
                        </div>
                    </label>
                    <label
                        class="flex items-center justify-between text-[10px] cursor-pointer group uppercase font-bold tracking-wider">
                        <span class="text-zinc-500 group-hover:text-zinc-300 transition-colors">Onion Skinning</span>
                        <input type="checkbox" id="onion-skin-toggle" class="sr-only peer">
                        <div
                            class="w-8 h-4 bg-zinc-800 rounded-full peer-checked:bg-accent relative transition-all border border-white/5">
                            <div
                                class="absolute w-2.5 h-2.5 bg-white rounded-full top-0.5 left-0.5 peer-checked:left-4.5 transition-all">
                            </div>
                        </div>
                    </label>
                    <label
                        class="flex items-center justify-between text-[10px] cursor-pointer group uppercase font-bold tracking-wider">
                        <span class="text-zinc-500 group-hover:text-zinc-300 transition-colors">Shape Tweening</span>
                        <input type="checkbox" id="shape-tweening" checked class="sr-only peer">
                        <div
                            class="w-8 h-4 bg-zinc-800 rounded-full peer-checked:bg-accent relative transition-all border border-white/5">
                            <div
                                class="absolute w-2.5 h-2.5 bg-white rounded-full top-0.5 left-0.5 peer-checked:left-4.5 transition-all">
                            </div>
                        </div>
                    </label>
                </div>
            </div>
        </aside>
    </main>

    <!-- Bottom Timeline -->
    <footer class="h-44 border-t border-white/5 bg-panel/95 backdrop-blur-xl flex flex-col relative shrink-0 z-50">
        <!-- Timeline Toolbar -->
        <div class="h-11 flex items-center justify-between px-4 border-b border-white/5 bg-black/20">
            <div class="flex items-center gap-1">
                <div class="flex bg-black/40 p-1 rounded-xl border border-white/10 mr-2 shadow-inner">
                    <button id="add-frame-btn"
                        class="flex items-center gap-1.5 px-2.5 py-1.5 hover:bg-white/5 rounded-lg transition-all text-[9px] font-black uppercase tracking-wider text-accent active:scale-95">
                        <i data-lucide="plus" class="w-3.5 h-3.5"></i> <span class="hidden lg:inline">ADD</span>
                    </button>
                    <button id="dup-frame-btn"
                        class="flex items-center gap-1.5 px-2.5 py-1.5 hover:bg-white/5 rounded-lg transition-all text-[9px] font-black uppercase tracking-wider text-zinc-500 active:scale-95">
                        <i data-lucide="copy" class="w-3.5 h-3.5"></i> <span class="hidden lg:inline">DUP</span>
                    </button>
                    <div class="w-px h-4 bg-white/5 self-center mx-1"></div>
                    <button id="copy-frame-btn"
                        class="flex items-center gap-1.5 px-2.5 py-1.5 hover:bg-white/5 rounded-lg transition-all text-[9px] font-black uppercase tracking-wider text-zinc-500 active:scale-95"
                        title="Copy Frame">
                        <i data-lucide="clipboard-copy" class="w-3.5 h-3.5"></i> <span
                            class="hidden lg:inline">COPY</span>
                    </button>
                    <button id="paste-frame-btn"
                        class="flex items-center gap-1.5 px-2.5 py-1.5 hover:bg-white/5 rounded-lg transition-all text-[9px] font-black uppercase tracking-wider text-zinc-500 active:scale-95"
                        title="Paste Frame">
                        <i data-lucide="clipboard-paste" class="w-3.5 h-3.5"></i> <span
                            class="hidden lg:inline">PASTE</span>
                    </button>
                    <div class="w-px h-4 bg-white/5 self-center mx-1"></div>
                    <button id="reverse-frames-btn"
                        class="flex items-center gap-1.5 px-2.5 py-1.5 hover:bg-white/5 rounded-lg transition-all text-[9px] font-black uppercase tracking-wider text-zinc-500 active:scale-95"
                        title="Reverse Frames">
                        <i data-lucide="refresh-cw" class="w-3.5 h-3.5"></i> <span class="hidden lg:inline">REV</span>
                    </button>
                </div>

                <div
                    class="flex items-center gap-3 bg-black/40 px-3 py-1.5 rounded-full border border-white/5 shadow-inner">
                    <div class="flex items-center gap-1.5">
                        <div class="w-1.5 h-1.5 rounded-full bg-accent animate-pulse shadow-[0_0_8px_var(--accent)]">
                        </div>
                        <span class="text-[9px] uppercase font-black text-zinc-500 tracking-widest">LIVE</span>
                    </div>
                    <div id="playhead-time" class="font-mono text-[13px] text-accent font-bold tracking-tight">00:00.000
                    </div>
                    <div class="w-px h-3 bg-white/10"></div>
                    <span id="total-time" class="text-[11px] font-mono text-zinc-500">0.0s</span>
                </div>
            </div>

            <button id="del-frame-btn"
                class="w-9 h-9 flex items-center justify-center text-zinc-600 hover:text-red-500 hover:bg-red-500/10 rounded-xl transition-all"
                title="Delete current frame">
                <i data-lucide="trash-2" class="w-4.5 h-4.5"></i>
            </button>
        </div>

        <!-- Timeline Content -->
        <div class="flex-1 overflow-x-auto overflow-y-hidden custom-scrollbar bg-black/30 relative select-none"
            id="timeline-area">
            <div class="pt-4">
                <div id="timeline-ruler" class="h-6 relative">
                    <!-- Ticks injected here -->
                </div>
                <div id="timeline-tracks" class="relative px-0 h-full">
                    <div id="main-track" class="relative h-24">
                        <!-- Frames injected here -->
                    </div>
                </div>
            </div>
            <!-- Playhead system -->
            <div id="playhead" class="playhead">
                <div class="playhead-marker"></div>
            </div>
        </div>
    </footer>

    <script src="script.js"></script>
    <script>
        // Initialize icons
        document.addEventListener('DOMContentLoaded', () => {
            if (typeof lucide !== 'undefined') {
                lucide.createIcons();
            }
        });
    </script>
</body>

</html>